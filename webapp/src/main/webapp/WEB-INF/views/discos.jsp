<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="my" uri="/WEB-INF/tld/rmapTagLibrary.tld" %>
<%@ taglib prefix="tl" tagdir="/WEB-INF/tags"%>
<c:set var="pageTitle" value="RMap DiSCO Summary | RMap Project"/>
<c:set var="currPage" value="search"/>
<%@include file="/includes/headstart.inc" %>
<%@include file="/includes/js/nodesedges.js" %>    
<%@include file="/includes/js/pagecontrol.js" %>    
</head>
<body onload="drawgraph();">
<%@include file="/includes/bodystart.inc" %>        
        
<article class="twelve columns main-content">
	<span class="tab">
		<a class="tablinks" id="graphviewlink" href="javascript:openView('graphview')">graph view <i class="fa fa-share-alt"></i></a>&nbsp;|&nbsp;
		<a class="tablinks" id="tableviewlink"href="javascript:openView('tableview')">table view <i class="fa fa-table"></i></a>
	</span>
	<h1>RMap DiSCO</h1>
	<h2>URI: ${DISCO.getUri()}</h2>
	<p>
		<c:if test="${DISCO.getCreator().length()>0}">
			<strong>Created by:</strong> <tl:displayRMapValue uri="${DISCO.getCreator()}"/><br/>
		</c:if>
		<c:if test="${DISCO.getProvGeneratedBy().length()>0}">
			<strong>Generated by:</strong> <tl:displayRMapValue uri="${DISCO.getProvGeneratedBy()}"/><br/>
		</c:if>
		<c:if test="${DISCO.getDescription().length()>0}">
			<strong>Description:</strong> ${DISCO.getDescription()}<br/>
		</c:if>
	</p>
	
	<c:set var="visualuri" value="/discos/${my:httpEncodeUri(DISCO.getUri())}/visual"/>
	
	<div id="graphview" class="tabcontent">
		<%@include file="/includes/standardViewGraph.inc" %>
	</div>
	
	<div id="tableview" class="tabcontent">
		<div id="loading">
		  <img id="loading-image" src="<c:url value='/includes/images/loading.gif'/>" alt="Loading..." />
		</div>
	</div>
</article>

<!-- End main Content -->
	    
<aside class="four columns right-sidebar">
     
	<div class="sidebar-widget">
		<div class="status${DISCO.getStatus().toString()}"><h1>${DISCO.getStatus().toString()}</h1></div>
		<h2>Related Events</h2>
		<ul>
			<c:forEach var="event" items="${DISCO.getEvents()}">
				<li><tl:displayRMapLink type="event" uri="${event.toString()}"/></li>
			</c:forEach>
		</ul>
		
		<c:set var="agentVersions" value="${DISCO.getAgentVersions()}"/>
		<h2>Other DiSCO Versions</h2>
		<h3>Same agent</h3>
		<c:if test="${agentVersions!=null && agentVersions.size()>0}">
			<ul>
			<c:forEach var="version" items="${agentVersions}">
				<li><tl:displayRMapLink type="disco" uri="${version.toString()}"/></li>
			</c:forEach>
			</ul>
		</c:if>
		<c:if test="${agentVersions==null || agentVersions.size()==0}">
			<p><em>None found</em></p>
		</c:if>

		<c:set var="otherAgentVersions" value="${DISCO.getOtherAgentVersions()}"/>
		<h3>Other agents</h3>
		<c:if test="${otherAgentVersions!=null && otherAgentVersions.size()>0}">
			<ul>
			<c:forEach var="version" items="${otherAgentVersions}">
				<li><tl:displayRMapLink uri="${version.toString()}" type="disco"/></li>
			</c:forEach>
			</ul>
		</c:if>
		<c:if test="${otherAgentVersions==null || otherAgentVersions.size()==0}">
			<p><em>None found</em></p>
		</c:if>
	</div>
</aside>
<!-- End Right Sidebar -->


<%@include file="/includes/footer.inc" %>